<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.124.1">
    <meta name="description" content="">
<meta name="author" content="journeyoftheaverageguy@gmail.com">

    <link rel="icon" href="/images/favicon.png" type="image/png">

    <title>React Router :: AWS System Manager</title>

    
    <link href="/css/nucleus.css?1713197695" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css?1713197695" rel="stylesheet">
    <link href="/css/hybrid.css?1713197695" rel="stylesheet">
    <link href="/css/featherlight.min.css?1713197695" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1713197695" rel="stylesheet">
    <link href="/css/auto-complete.css?1713197695" rel="stylesheet">
    <link href="/css/atom-one-dark-reasonable.css?1713197695" rel="stylesheet">
    <link href="/css/theme.css?1713197695" rel="stylesheet">
    <link href="/css/hugo-theme.css?1713197695" rel="stylesheet">
    
    <link href="/css/theme-workshop.css?1713197695" rel="stylesheet">
    
    

    <script src="/js/jquery-3.3.1.min.js?1713197695"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/6-photosharingapp/6.2-reactrouter/">
    <nav id="sidebar" class="showVisitedLinks">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="/">

<svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 30" width="30%"><defs><style>.cls-1{fill:#fff;}.cls-2{fill:#f90;fill-rule:evenodd;}</style></defs><title>AWS-Logo_White-Color</title><path class="cls-1" d="M14.09,10.85a4.7,4.7,0,0,0,.19,1.48,7.73,7.73,0,0,0,.54,1.19.77.77,0,0,1,.12.38.64.64,0,0,1-.32.49l-1,.7a.83.83,0,0,1-.44.15.69.69,0,0,1-.49-.23,3.8,3.8,0,0,1-.6-.77q-.25-.42-.51-1a6.14,6.14,0,0,1-4.89,2.3,4.54,4.54,0,0,1-3.32-1.19,4.27,4.27,0,0,1-1.22-3.2A4.28,4.28,0,0,1,3.61,7.75,6.06,6.06,0,0,1,7.69,6.46a12.47,12.47,0,0,1,1.76.13q.92.13,1.91.36V5.73a3.65,3.65,0,0,0-.79-2.66A3.81,3.81,0,0,0,7.86,2.3a7.71,7.71,0,0,0-1.79.22,12.78,12.78,0,0,0-1.79.57,4.55,4.55,0,0,1-.58.22l-.26,0q-.35,0-.35-.52V2a1.09,1.09,0,0,1,.12-.58,1.2,1.2,0,0,1,.47-.35A10.88,10.88,0,0,1,5.77.32,10.19,10.19,0,0,1,8.36,0a6,6,0,0,1,4.35,1.35,5.49,5.49,0,0,1,1.38,4.09ZM7.34,13.38a5.36,5.36,0,0,0,1.72-.31A3.63,3.63,0,0,0,10.63,12,2.62,2.62,0,0,0,11.19,11a5.63,5.63,0,0,0,.16-1.44v-.7a14.35,14.35,0,0,0-1.53-.28,12.37,12.37,0,0,0-1.56-.1,3.84,3.84,0,0,0-2.47.67A2.34,2.34,0,0,0,5,11a2.35,2.35,0,0,0,.61,1.76A2.4,2.4,0,0,0,7.34,13.38Zm13.35,1.8a1,1,0,0,1-.64-.16,1.3,1.3,0,0,1-.35-.65L15.81,1.51a3,3,0,0,1-.15-.67.36.36,0,0,1,.41-.41H17.7a1,1,0,0,1,.65.16,1.4,1.4,0,0,1,.33.65l2.79,11,2.59-11A1.17,1.17,0,0,1,24.39.6a1.1,1.1,0,0,1,.67-.16H26.4a1.1,1.1,0,0,1,.67.16,1.17,1.17,0,0,1,.32.65L30,12.39,32.88,1.25A1.39,1.39,0,0,1,33.22.6a1,1,0,0,1,.65-.16h1.54a.36.36,0,0,1,.41.41,1.36,1.36,0,0,1,0,.26,3.64,3.64,0,0,1-.12.41l-4,12.86a1.3,1.3,0,0,1-.35.65,1,1,0,0,1-.64.16H29.25a1,1,0,0,1-.67-.17,1.26,1.26,0,0,1-.32-.67L25.67,3.64,23.11,14.34a1.26,1.26,0,0,1-.32.67,1,1,0,0,1-.67.17Zm21.36.44a11.28,11.28,0,0,1-2.56-.29,7.44,7.44,0,0,1-1.92-.67,1,1,0,0,1-.61-.93v-.84q0-.52.38-.52a.9.9,0,0,1,.31.06l.42.17a8.77,8.77,0,0,0,1.83.58,9.78,9.78,0,0,0,2,.2,4.48,4.48,0,0,0,2.43-.55,1.76,1.76,0,0,0,.86-1.57,1.61,1.61,0,0,0-.45-1.16A4.29,4.29,0,0,0,43,9.22l-2.41-.76A5.15,5.15,0,0,1,38,6.78a3.94,3.94,0,0,1-.83-2.41,3.7,3.7,0,0,1,.45-1.85,4.47,4.47,0,0,1,1.19-1.37A5.27,5.27,0,0,1,40.51.29,7.4,7.4,0,0,1,42.6,0a8.87,8.87,0,0,1,1.12.07q.57.07,1.08.19t.95.26a4.27,4.27,0,0,1,.7.29,1.59,1.59,0,0,1,.49.41.94.94,0,0,1,.15.55v.79q0,.52-.38.52a1.76,1.76,0,0,1-.64-.2,7.74,7.74,0,0,0-3.2-.64,4.37,4.37,0,0,0-2.21.47,1.6,1.6,0,0,0-.79,1.48,1.58,1.58,0,0,0,.49,1.18,4.94,4.94,0,0,0,1.83.92L44.55,7a5.08,5.08,0,0,1,2.57,1.6A3.76,3.76,0,0,1,47.9,11a4.21,4.21,0,0,1-.44,1.93,4.4,4.4,0,0,1-1.21,1.47,5.43,5.43,0,0,1-1.85.93A8.25,8.25,0,0,1,42.05,15.62Z"></path><path class="cls-2" d="M45.19,23.81C39.72,27.85,31.78,30,25,30A36.64,36.64,0,0,1,.22,20.57c-.51-.46-.06-1.09.56-.74A49.78,49.78,0,0,0,25.53,26.4,49.23,49.23,0,0,0,44.4,22.53C45.32,22.14,46.1,23.14,45.19,23.81Z"></path><path class="cls-2" d="M47.47,21.21c-.7-.9-4.63-.42-6.39-.21-.53.06-.62-.4-.14-.74,3.13-2.2,8.27-1.57,8.86-.83s-.16,5.89-3.09,8.35c-.45.38-.88.18-.68-.32C46.69,25.8,48.17,22.11,47.47,21.21Z"></path></svg>

</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js?1713197695"></script>
<script type="text/javascript" src="/js/auto-complete.js?1713197695"></script>
<script type="text/javascript">
    
        var baseurl = "\/\/localhost:1313\/";
    
</script>
<script type="text/javascript" src="/js/search.js?1713197695"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/1-introduce/" title="Introduce" class="dd-item 
        
        
        
        ">
      <a href="/1-introduce/">
           <b> 1. </b> Introduce
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/2-prerequiste/" title="Preparation " class="dd-item 
        
        
        
        ">
      <a href="/2-prerequiste/">
           <b> 2. </b> Preparation 
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/2-prerequiste/2.1-createreactapp/" title="Create React App" class="dd-item 
        
        
        
        ">
      <a href="/2-prerequiste/2.1-createreactapp/">
           <b> 2.1 </b> Create React App
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/2-prerequiste/2.2-configamplify/" title="Configure Amplify" class="dd-item 
        
        
        
        ">
      <a href="/2-prerequiste/2.2-configamplify/">
           <b> 2.2 </b> Configure Amplify
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/4-authentication/" title="Authentication" class="dd-item 
        
        
        
        ">
      <a href="/4-authentication/">
           <b> 4. </b> Authentication
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/4-authentication/4.1-authapi/" title="Add Authentication" class="dd-item 
        
        
        
        ">
      <a href="/4-authentication/4.1-authapi/">
           <b> 4.1. </b> Add Authentication
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/4-authentication/4.2-authfe/" title="Authentication in React" class="dd-item 
        
        
        
        ">
      <a href="/4-authentication/4.2-authfe/">
           <b> 4.2. </b> Authentication in React
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/5-storage/" title="Image Storage with Amazon S3" class="dd-item 
        
        
        
        ">
      <a href="/5-storage/">
           <b> 5. </b> Image Storage with Amazon S3
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/6-photosharingapp/" title="Photo Sharing App" class="dd-item 
        parent
        
        
        ">
      <a href="/6-photosharingapp/">
           <b> 6. </b> Photo Sharing App
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/6-photosharingapp/6.4-authgraphql/" title="Adding Authorization to the GraphQL API" class="dd-item 
        
        
        
        ">
      <a href="/6-photosharingapp/6.4-authgraphql/">
           <b> 6.4. </b> Adding Authorization to the GraphQL API
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/6-photosharingapp/6.1-appsetup/" title="App Setup" class="dd-item 
        
        
        
        ">
      <a href="/6-photosharingapp/6.1-appsetup/">
           <b> 6.1. </b> App Setup
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/6-photosharingapp/6.2-reactrouter/" title="React Router" class="dd-item 
        
        active
        
        ">
      <a href="/6-photosharingapp/6.2-reactrouter/">
           <b> 6.2. </b> React Router
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/6-photosharingapp/6.3-tryitout/" title="Try it out" class="dd-item 
        
        
        
        ">
      <a href="/6-photosharingapp/6.3-tryitout/">
           <b> 6.3. </b> Try it out
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/3-api/" title="Using GraphQL with React" class="dd-item 
        
        
        
        ">
      <a href="/3-api/">
           <b> 3 </b> Using GraphQL with React
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/3-api/3.1-graphqlapi/" title="Adding a GraphQL API" class="dd-item 
        
        
        
        ">
      <a href="/3-api/3.1-graphqlapi/">
           <b> 3.1. </b> Adding a GraphQL API
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/3-api/3.2-deployapi/" title="Deploying the API" class="dd-item 
        
        
        
        ">
      <a href="/3-api/3.2-deployapi/">
           <b> 3.2. </b> Deploying the API
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/3-api/3.3-usingapi/" title="Using GraphQL with React" class="dd-item 
        
        
        
        ">
      <a href="/3-api/3.3-usingapi/">
           <b> 3.3. </b> Using GraphQL with React
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/7-cleanup/" title="Clean up resources" class="dd-item 
        
        
        
        ">
      <a href="/7-cleanup/">
          <b>6. </b>Clean up resources
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
         
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li> 
                  <a class="padding" href="https://www.facebook.com/groups/awsstudygroupfcj/"><i class='fab fa-facebook'></i> AWS Study Group</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="prefooter">
      <hr/>
      <ul>
      
        <li>
          <a class="padding">
            <i class="fas fa-language fa-fw"></i>
          <div class="select-style">
            <select id="select-language" onchange="location = this.value;">
          
          
          
              
              
                  
                    
                    
                      <option id="en" value="//localhost:1313/6-photosharingapp/6.2-reactrouter/" selected>English</option>
                    
                  
              
                  
              
          
              
              
                  
              
                  
                    
                    
                      <option id="vi" value="//localhost:1313/vi/6-photosharingapp/6.2-reactrouter/">Tiếng Việt</option>
                    
                  
              
          
        </select>
        <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
          width="255px" height="255px" viewBox="0 0 255 255" style="enable-background:new 0 0 255 255;" xml:space="preserve">
          <g>
            <g id="arrow-drop-down">
              <polygon points="0,63.75 127.5,191.25 255,63.75 		" />
            </g>
          </g>
        </svg>
        </div>
        </a>
        </li>
      
      
      
        <li><a class="padding" href="#" data-clear-history-toggle=""><i class="fas fa-history fa-fw"></i> Clear History</a></li>
      
      </ul>
    </section>
    
    <section id="footer">
      <left>
    
     <b> Workshop</b> <br>
    <img src="https://hitwebcounter.com/counter/counter.php?page=7920860&style=0038&nbdigits=9&type=page&initCount=0" title="Migrate" Alt="web counter"   border="0" /></a>  <br>
     <b> <a href="https://cloudjourney.awsstudygroup.com/">Cloud Journey</a></b> <br>
    <img src="https://hitwebcounter.com/counter/counter.php?page=7830807&style=0038&nbdigits=9&type=page&initCount=0" title="Total CLoud Journey" Alt="web counter"   border="0"   />
     
</left>
<left>
    <br>
    <br>
        <b> Last Updated </b> <br>
        <i><font color=orange>30-01-2022</font></i>
    </left>
    <left>
        <br>
        <br>
            <b> Team </b> <br>
           
            <i> <a href="https://www.linkedin.com/in/sutrinh/"  style="color:orange">Sử Trịnh  </a> <br>
                <a href="https://www.linkedin.com/in/jotaguy"  style="color:orange">Gia Hưng </a> <br>
                <a href="https://www.linkedin.com/in/hiepnguyendt"  style="color:orange">Thanh Hiệp </a>
               
        </i>
        </left>

<script async defer src="https://buttons.github.io/buttons.js"></script>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/'>Amplify Photo Sharing Workshop</a> > <a href='/6-photosharingapp/'>Photo Sharing App</a> > React Router
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents"></nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              React Router
            </h1>
          

        



	<p>Next we need to create the router in App.js. Our app will have two main routes:</p>
<ol>
<li>A home route - /. This route will render a list of posts from our API</li>
<li>A post details route - /post/:id. This route will render a single post and details about that post.</li>
</ol>
<p>Using React Router, we can read the Post ID from the route, and then fetch the post associated with it. This is a common pattern in many apps as it makes the link shareable.</p>
<p>Another way to do this would be to have some global state management set up and then set the post ID in the global state. The main drawback of this approach is that the URL cannot be shared.</p>
<p>Other than routing, the main functionality happening in this component is a call to fetch posts from our GraphQL API.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>// src/App.js
</span></span><span style="display:flex;"><span>import React, { useEffect, useState } from &#34;react&#34;;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>import { withAuthenticator } from &#34;@aws-amplify/ui-react&#34;;
</span></span><span style="display:flex;"><span>import &#34;@aws-amplify/ui-react/styles.css&#34;;
</span></span><span style="display:flex;"><span>import { generateClient } from &#34;aws-amplify/api&#34;;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>// import query definition
</span></span><span style="display:flex;"><span>import { listPosts } from &#34;./graphql/queries&#34;;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>import Button from &#34;./Button&#34;;
</span></span><span style="display:flex;"><span>import CreatePost from &#34;./CreatePost&#34;;
</span></span><span style="display:flex;"><span>import Header from &#34;./Header&#34;;
</span></span><span style="display:flex;"><span>import Post from &#34;./Post&#34;;
</span></span><span style="display:flex;"><span>import Posts from &#34;./Posts&#34;;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>import &#34;@aws-amplify/ui-react/styles.css&#34;;
</span></span><span style="display:flex;"><span>import { css } from &#34;@emotion/css&#34;;
</span></span><span style="display:flex;"><span>import { HashRouter, Route, Switch } from &#34;react-router-dom&#34;;
</span></span><span style="display:flex;"><span>import { getUrl } from &#34;aws-amplify/storage&#34;;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>function Router({ user, signOut }) {
</span></span><span style="display:flex;"><span>  /* create a couple of pieces of initial state */
</span></span><span style="display:flex;"><span>  const [showOverlay, updateOverlayVisibility] = useState(false);
</span></span><span style="display:flex;"><span>  const [posts, updatePosts] = useState([]);
</span></span><span style="display:flex;"><span>  const client = generateClient();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  const [myPosts, updateMyPosts] = useState([]);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  /* fetch posts when component loads */
</span></span><span style="display:flex;"><span>  useEffect(() =&gt; {
</span></span><span style="display:flex;"><span>    fetchPosts();
</span></span><span style="display:flex;"><span>  }, []);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  const handleGetUrl = async (key) =&gt; {
</span></span><span style="display:flex;"><span>    const url = await getUrl({
</span></span><span style="display:flex;"><span>      key,
</span></span><span style="display:flex;"><span>      options: {
</span></span><span style="display:flex;"><span>        validateObjectExistence: true,
</span></span><span style="display:flex;"><span>      },
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>    return url.url.href;
</span></span><span style="display:flex;"><span>  };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  async function fetchPosts() {
</span></span><span style="display:flex;"><span>    /* query the API, ask for 100 items */
</span></span><span style="display:flex;"><span>    let postData = await client.graphql({
</span></span><span style="display:flex;"><span>      query: listPosts,
</span></span><span style="display:flex;"><span>      variables: { limit: 100 },
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>    let postsArray = postData.data.listPosts.items;
</span></span><span style="display:flex;"><span>    setPostState(postsArray);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    /* map over the image keys in the posts array, get signed image URLs for each image */
</span></span><span style="display:flex;"><span>    postsArray = await Promise.all(
</span></span><span style="display:flex;"><span>      postsArray.map(async (post) =&gt; {
</span></span><span style="display:flex;"><span>        if (post.image) {
</span></span><span style="display:flex;"><span>          try {
</span></span><span style="display:flex;"><span>            const imageURL = await handleGetUrl(post.image);
</span></span><span style="display:flex;"><span>            post.image = imageURL;
</span></span><span style="display:flex;"><span>            return post;
</span></span><span style="display:flex;"><span>          } catch (error) {
</span></span><span style="display:flex;"><span>            if (error.code === &#34;NotFound&#34;) {
</span></span><span style="display:flex;"><span>              console.error(&#34;Image not found for post:&#34;, post.id);
</span></span><span style="display:flex;"><span>            } else {
</span></span><span style="display:flex;"><span>              console.error(
</span></span><span style="display:flex;"><span>                &#34;Error fetching image URL for post:&#34;,
</span></span><span style="display:flex;"><span>                post.id,
</span></span><span style="display:flex;"><span>                error
</span></span><span style="display:flex;"><span>              );
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            return post;
</span></span><span style="display:flex;"><span>          }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>      })
</span></span><span style="display:flex;"><span>    );
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    /* update the posts array in the local state */
</span></span><span style="display:flex;"><span>    setPostState(postsArray);
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  async function setPostState(postsArray) {
</span></span><span style="display:flex;"><span>    const myPostData = postsArray.filter((p) =&gt; p.owner === user.username);
</span></span><span style="display:flex;"><span>    updateMyPosts(myPostData);
</span></span><span style="display:flex;"><span>    updatePosts(postsArray);
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  return (
</span></span><span style="display:flex;"><span>    <span style="color:#960050;background-color:#1e0010">&lt;</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">HashRouter</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">className</span><span style="color:#f92672">=</span><span style="color:#e6db74">{contentStyle}</span>&gt;
</span></span><span style="display:flex;"><span>          &lt;<span style="color:#f92672">Header</span> /&gt;
</span></span><span style="display:flex;"><span>          &lt;<span style="color:#f92672">hr</span> <span style="color:#a6e22e">className</span><span style="color:#f92672">=</span><span style="color:#e6db74">{dividerStyle}</span> /&gt;
</span></span><span style="display:flex;"><span>          &lt;<span style="color:#f92672">Button</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">title</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;New Post&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">onClick</span><span style="color:#f92672">=</span><span style="color:#e6db74">{()</span> <span style="color:#960050;background-color:#1e0010">=</span>&gt; updateOverlayVisibility(true)}
</span></span><span style="display:flex;"><span>          /&gt;
</span></span><span style="display:flex;"><span>          &lt;<span style="color:#f92672">Switch</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;<span style="color:#f92672">Route</span> <span style="color:#a6e22e">exact</span> <span style="color:#a6e22e">path</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/&#34;</span>&gt;
</span></span><span style="display:flex;"><span>              &lt;<span style="color:#f92672">Posts</span> <span style="color:#a6e22e">posts</span><span style="color:#f92672">=</span><span style="color:#e6db74">{posts}</span> /&gt;
</span></span><span style="display:flex;"><span>            &lt;/<span style="color:#f92672">Route</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;<span style="color:#f92672">Route</span> <span style="color:#a6e22e">path</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/post/:id&#34;</span>&gt;
</span></span><span style="display:flex;"><span>              &lt;<span style="color:#f92672">Post</span> /&gt;
</span></span><span style="display:flex;"><span>            &lt;/<span style="color:#f92672">Route</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;<span style="color:#f92672">Route</span> <span style="color:#a6e22e">exact</span> <span style="color:#a6e22e">path</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/myposts&#34;</span>&gt;
</span></span><span style="display:flex;"><span>              &lt;<span style="color:#f92672">Posts</span> <span style="color:#a6e22e">posts</span><span style="color:#f92672">=</span><span style="color:#e6db74">{myPosts}</span> /&gt;
</span></span><span style="display:flex;"><span>            &lt;/<span style="color:#f92672">Route</span>&gt;
</span></span><span style="display:flex;"><span>          &lt;/<span style="color:#f92672">Switch</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">button</span> <span style="color:#a6e22e">onClick</span><span style="color:#f92672">=</span><span style="color:#e6db74">{signOut}</span>&gt;Sign out&lt;/<span style="color:#f92672">button</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;/<span style="color:#f92672">HashRouter</span>&gt;
</span></span><span style="display:flex;"><span>      {showOverlay <span style="color:#960050;background-color:#1e0010">&amp;&amp;</span> (
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">CreatePost</span>
</span></span><span style="display:flex;"><span>          <span style="color:#a6e22e">updateOverlayVisibility</span><span style="color:#f92672">=</span><span style="color:#e6db74">{updateOverlayVisibility}</span>
</span></span><span style="display:flex;"><span>          <span style="color:#a6e22e">updatePosts</span><span style="color:#f92672">=</span><span style="color:#e6db74">{setPostState}</span>
</span></span><span style="display:flex;"><span>          <span style="color:#a6e22e">posts</span><span style="color:#f92672">=</span><span style="color:#e6db74">{posts}</span>
</span></span><span style="display:flex;"><span>          <span style="color:#a6e22e">user</span><span style="color:#f92672">=</span><span style="color:#e6db74">{user}</span>
</span></span><span style="display:flex;"><span>        /&gt;
</span></span><span style="display:flex;"><span>      )}
</span></span><span style="display:flex;"><span>    <span style="color:#960050;background-color:#1e0010">&lt;</span>/&gt;
</span></span><span style="display:flex;"><span>  );
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>const dividerStyle = css`
</span></span><span style="display:flex;"><span>  margin-top: 15px;
</span></span><span style="display:flex;"><span>`;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>const contentStyle = css`
</span></span><span style="display:flex;"><span>  min-height: calc(100vh - 45px);
</span></span><span style="display:flex;"><span>  padding: 0px 40px;
</span></span><span style="display:flex;"><span>`;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>export default withAuthenticator(Router);
</span></span></code></pre></div>




<footer class=" footline" >
	
</footer>

        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="/6-photosharingapp/6.1-appsetup/" title="App Setup"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/6-photosharingapp/6.3-tryitout/" title="Try it out" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1713197695"></script>
    <script src="/js/perfect-scrollbar.min.js?1713197695"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1713197695"></script>
    <script src="/js/jquery.sticky.js?1713197695"></script>
    <script src="/js/featherlight.min.js?1713197695"></script>
    <script src="/js/highlight.pack.js?1713197695"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom-3.6.0.js?1713197695"></script>
    <script src="/js/learn.js?1713197695"></script>
    <script src="/js/hugo-learn.js?1713197695"></script>

    <link href="/mermaid/mermaid.css?1713197695" rel="stylesheet" />
    <script src="/mermaid/mermaid.js?1713197695"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-158079754-2', 'auto');
  ga('send', 'pageview');

</script>
  </body>
</html>
